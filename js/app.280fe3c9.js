(function(t){function e(e){for(var r,i,c=e[0],s=e[1],u=e[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o={app:0},a=[];function c(t){return s.p+"js/"+({News:"News"}[t]||t)+"."+{News:"bb0ca13b"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={News:1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({News:"News"}[t]||t)+"."+{News:"e86edd0a"}[t]+".css",o=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete i[t],f.parentNode.removeChild(f),n(a)},f.href=o;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){i[t]=0})));var r=o[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,n){r=o[t]=[e,n]}));e.push(r[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}o[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/Taiwan-Bike/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0591":function(t,e,n){var r={"./btn_bike_close.svg":"078e","./btn_bike_open.svg":"a18a","./icon_bike.svg":"d103","./icon_bike_outOfService.svg":"5826","./icon_bike_selected.svg":"2c92","./icon_myLocation.svg":"deae","./icon_route_end.svg":"d6f2","./icon_route_start.svg":"3257","./logo-s.svg":"f562","./logo.svg":"1ae4"};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id="0591"},"078e":function(t,e,n){t.exports=n.p+"img/btn_bike_close.1175d9cc.svg"},"1ae4":function(t,e,n){t.exports=n.p+"img/logo.60bd1729.svg"},"1e55":function(t,e,n){"use strict";n("7d72")},"2c92":function(t,e,n){t.exports=n.p+"img/icon_bike_selected.27d703d6.svg"},3257:function(t,e,n){t.exports=n.p+"img/icon_route_start.161d8423.svg"},4360:function(t,e,n){"use strict";var r=n("1da1"),i=(n("96cf"),n("7db0"),n("d3b7"),n("4de4"),n("159b"),n("5502")),o=n("bc3a"),a=n.n(o),c=n("b8ba");e["a"]=Object(i["a"])({state:{loading:!1,cities:[],currentCity:"Kaohsiung",currentTown:"前鎮區",routes:[],currentRoute:[]},getters:{townList:function(t){var e;return(null===(e=t.cities.find((function(e){return e.City===t.currentCity})))||void 0===e?void 0:e.AreaList)||null},routeList:function(t){return t.routes.filter((function(e){return e.Town===t.currentTown})).filter((function(t){return t.RoadSectionStart&&t.RoadSectionEnd}))}},mutations:{SET_LOADING:function(t,e){t.loading=e},SET_CITIES:function(t,e){t.cities=e},SET_CURRENT_CITY:function(t,e){t.currentCity=e},SET_CURRENT_TOWN:function(t,e){t.currentTown=e},SET_ROUTES:function(t,e){t.routes=e},SET_CURRENT_ROUTE:function(t,e){t.currentRoute=e}},actions:{GET_CITIES:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("SET_LOADING",!0),e.next=3,a()({method:"get",url:"https://raw.githubusercontent.com/donma/TaiwanAddressCityAreaRoadChineseEnglishJSON/master/CityCountyData.json"}).then((function(t){return t.data})).catch((function(t){return console.log("err of location:",t)}));case 3:return n=e.sent,e.next=6,a()({method:"get",url:"https://gist.transportdata.tw/gist_api/V3/Map/Basic/City?$format=JSON"}).then((function(t){return t.data})).catch((function(t){return console.log("err of cities",t)}));case 6:r=e.sent,i=[],n.forEach((function(t){r.forEach((function(e){if("新竹市"!==t.CityName&&t.CityName===e.CityName){var n=e.CityName,r=e.City,o=t.AreaList;i.push({CityName:n,City:r,AreaList:o})}}))})),t.commit("SET_CITIES",i),t.commit("SET_LOADING",!1);case 11:case"end":return e.stop()}}),e)})))()},GET_ROUTES:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("SET_LOADING",!0),n=t.state.currentCity,e.next=4,a()({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape/".concat(n,"?%24format=JSON"),headers:Object(c["a"])()}).then((function(t){return t.data})).catch((function(t){return console.log("err of shape:",t)}));case 4:r=e.sent,t.commit("SET_ROUTES",r),t.commit("SET_LOADING",!1);case 7:case"end":return e.stop()}}),e)})))()}},modules:{}})},"4e86":function(t,e,n){"use strict";n("9524")},5247:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=n("1ae4"),o=n.n(i),a={class:"container-fluid fixed-top",id:"nav"},c={class:"container"},s={class:"navbar navbar-expand-lg navbar-light px-0 py-4"},u={class:"navbar-brand m-0"},l=Object(r["g"])("img",{src:o.a,alt:"logo"},null,-1),d=Object(r["g"])("button",{class:"navbar-toggler","data-bs-toggle":"collapse","data-bs-target":"#navbar"},[Object(r["g"])("span",{class:"navbar-toggler-icon"})],-1),f={class:"collapse navbar-collapse",id:"navbar"},b={class:"navbar-nav ms-auto"},p={class:"nav-item"},h=Object(r["h"])("找路線"),m={class:"nav-item"},g=Object(r["h"])("最新消息");function v(t,e,n,i,o,v){var O=Object(r["z"])("Loading"),y=Object(r["z"])("router-link"),j=Object(r["z"])("router-view");return Object(r["s"])(),Object(r["f"])(r["a"],null,[v.loading?(Object(r["s"])(),Object(r["d"])(O,{key:0})):Object(r["e"])("",!0),Object(r["g"])("div",a,[Object(r["g"])("div",c,[Object(r["g"])("nav",s,[Object(r["g"])("h1",u,[Object(r["i"])(y,{to:"/"},{default:Object(r["F"])((function(){return[l]})),_:1})]),d,Object(r["g"])("div",f,[Object(r["g"])("ul",b,[Object(r["g"])("li",p,[Object(r["i"])(y,{to:"/",class:"nav-link"},{default:Object(r["F"])((function(){return[h]})),_:1})]),Object(r["g"])("li",m,[Object(r["i"])(y,{to:{name:"News"},class:"nav-link"},{default:Object(r["F"])((function(){return[g]})),_:1})])])])])])]),Object(r["i"])(j)],64)}var O=n("4360"),y=n("f562"),j=n.n(y),S=function(t){return Object(r["v"])("data-v-7c6884d6"),t=t(),Object(r["t"])(),t},T={class:"container-fluid vh-100 bg-dark bg-opacity-25 cover"},k=S((function(){return Object(r["g"])("img",{src:j.a,alt:"bicycle",class:"move position-absolute top-50 start-50"},null,-1)})),w=[k];function _(t,e,n,i,o,a){return Object(r["s"])(),Object(r["f"])("div",T,w)}var C={name:"Loading"},L=(n("b548"),n("6b0d")),E=n.n(L);const N=E()(C,[["render",_],["__scopeId","data-v-7c6884d6"]]);var R=N;console.clear();var x={components:{Loading:R},computed:{loading:function(){return O["a"].state.loading}},mounted:function(){O["a"].dispatch("GET_CITIES"),O["a"].dispatch("GET_ROUTES")}};n("1e55");const M=E()(x,[["render",v]]);var A=M,B=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),D={id:"home",class:"container pt-5 mt-5"},I={id:"bikeRoute",class:"row d-flex flex-xl-row-reverse"};function U(t,e,n,i,o,a){var c=Object(r["z"])("TheSelect"),s=Object(r["z"])("TheMap"),u=Object(r["z"])("TheList");return Object(r["s"])(),Object(r["f"])("div",D,[Object(r["i"])(c,{routeNumber:a.routeList.length},null,8,["routeNumber"]),Object(r["g"])("div",I,[Object(r["i"])(s,{currentRoute:a.currentRoute},null,8,["currentRoute"]),Object(r["i"])(u,{routeList:a.routeList,currentRoute:a.currentRoute},null,8,["routeList","currentRoute"])])])}var G=function(t){return Object(r["v"])("data-v-b23cb5e4"),t=t(),Object(r["t"])(),t},P={class:"pt-3"},F=G((function(){return Object(r["g"])("span",{class:"me-3 fw-bold"},"搜尋結果",-1)})),z={class:"text-muted"},J=Object(r["h"])("共 "),H=Object(r["h"])(" 筆"),Y={class:"row mb-3"},K={class:"col-12 col-xl-4"},V={class:"d-flex justify-content-between"},q=G((function(){return Object(r["g"])("option",{value:"null"},"請選擇縣市",-1)})),W=["value"],X=G((function(){return Object(r["g"])("option",{value:"null"},"請選擇鄉鎮",-1)})),Z=["value"];function $(t,e,n,i,o,a){return Object(r["s"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("p",P,[F,Object(r["g"])("span",z,[J,Object(r["g"])("span",null,Object(r["B"])(n.routeNumber),1),H])]),Object(r["g"])("div",Y,[Object(r["g"])("div",K,[Object(r["g"])("form",V,[Object(r["G"])(Object(r["g"])("select",{name:"city",id:"city",class:"form-select me-2","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.currentCity=t})},[q,(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(a.cityList,(function(t){return Object(r["s"])(),Object(r["f"])("option",{key:t.City,value:t.City},Object(r["B"])(t.CityName),9,W)})),128))],512),[[r["D"],a.currentCity]]),Object(r["G"])(Object(r["g"])("select",{name:"town",id:"town",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.currentTown=t})},[X,(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(a.townList,(function(t){return Object(r["s"])(),Object(r["f"])("option",{key:t.ZipCode,value:t.AreaName},Object(r["B"])(t.AreaName),9,Z)})),128))],512),[[r["D"],a.currentTown]])])])])],64)}n("a9e3");var Q={props:{routeNumber:{type:Number,required:!0}},computed:{currentCity:{get:function(){return O["a"].state.currentCity},set:function(t){O["a"].commit("SET_CURRENT_CITY",t),O["a"].commit("SET_CURRENT_TOWN",null)}},currentTown:{get:function(){return O["a"].state.currentTown},set:function(t){O["a"].commit("SET_CURRENT_TOWN",t),O["a"].dispatch("GET_ROUTES",t)}},cityList:function(){return O["a"].state.cities},townList:function(){return O["a"].getters["townList"]}}};n("b14f");const tt=E()(Q,[["render",$],["__scopeId","data-v-b23cb5e4"]]);var et=tt,nt=function(t){return Object(r["v"])("data-v-d0c681e4"),t=t(),Object(r["t"])(),t},rt={key:0,class:"col-12 col-lg-4"},it={id:"cardList",class:"ps-0 text-align-start"},ot={key:0},at=["onClick"],ct={class:"card-header bg-white d-flex justify-content-between align-items-center py-3"},st={class:"card-title fw-bold fs-6 m-0"},ut={class:"badge round-pill bg-secondary fs-8 d-inline-block py-2 px-3"},lt={class:"card-body d-flex justify-content-between align-items-center"},dt={class:""},ft={class:"card-text mb-2"},bt=nt((function(){return Object(r["g"])("span",{class:"circle-primary me-3"},"起",-1)})),pt={class:"card-text"},ht=nt((function(){return Object(r["g"])("span",{class:"circle-primary me-3"},"迄",-1)})),mt={class:"text-center"},gt=nt((function(){return Object(r["g"])("p",{class:"fs-8 mb-0"},"全長",-1)})),vt={class:"text-primary fs-7 fw-bold"};function Ot(t,e,n,i,o,a){return n.routeList?(Object(r["s"])(),Object(r["f"])("div",rt,[Object(r["g"])("ul",it,[n.routeList.length?(Object(r["s"])(!0),Object(r["f"])(r["a"],{key:1},Object(r["y"])(n.routeList,(function(t){return Object(r["s"])(),Object(r["f"])("li",{class:Object(r["o"])(["card mb-4",{active:t===n.currentRoute}]),key:t.RouteName,onClick:function(e){return a.setCurrentRoute(t)}},[Object(r["g"])("div",ct,[Object(r["g"])("h3",st,Object(r["B"])(a.spliceString(t.RouteName,15)),1),Object(r["g"])("span",ut,Object(r["B"])(t.Direction),1)]),Object(r["g"])("div",lt,[Object(r["g"])("div",dt,[Object(r["g"])("p",ft,[bt,Object(r["h"])(" "+Object(r["B"])(a.spliceString(t.RoadSectionStart,13)),1)]),Object(r["g"])("p",pt,[ht,Object(r["h"])(" "+Object(r["B"])(a.spliceString(t.RoadSectionEnd,13)),1)])]),Object(r["g"])("div",mt,[gt,Object(r["g"])("span",vt,Object(r["B"])(a.formatNumber(t.CyclingLength,2))+" 公里 ",1)])])],10,at)})),128)):(Object(r["s"])(),Object(r["f"])("li",ot,"查無自行車路線，請重新選擇地區。"))])])):Object(r["e"])("",!0)}n("fb6a"),n("b680");var yt={props:{routeList:{type:Array,required:!0},currentRoute:{type:Object}},methods:{spliceString:function(t,e){return t.length>=e?t.slice(0,e)+"...":t},formatNumber:function(t,e){if(t)return t=(Number(t)/1e3).toFixed(e),t},setCurrentRoute:function(t){O["a"].commit("SET_CURRENT_ROUTE",t)}}};n("4e86");const jt=E()(yt,[["render",Ot],["__scopeId","data-v-d0c681e4"]]);var St=jt,Tt=n("078e"),kt=n.n(Tt),wt=n("a18a"),_t=n.n(wt),Ct={class:"col-12 col-lg-8 pb-3"},Lt=Object(r["g"])("div",{id:"map"},null,-1);function Et(t,e,n,i,o,a){return Object(r["s"])(),Object(r["f"])("div",Ct,[Lt,Object(r["g"])("a",{href:"#",id:"showStationBtn",onClick:e[2]||(e[2]=Object(r["H"])((function(){}),["prevent"]))},[o.showStations?(Object(r["s"])(),Object(r["f"])("img",{key:1,src:_t.a,alt:"show bike station",onClick:e[1]||(e[1]=function(){return a.toggleStations&&a.toggleStations.apply(a,arguments)})})):(Object(r["s"])(),Object(r["f"])("img",{key:0,src:kt.a,alt:"show bike station",onClick:e[0]||(e[0]=function(){return a.toggleStations&&a.toggleStations.apply(a,arguments)})}))])])}n("d81d"),n("99af"),n("159b"),n("b0c0"),n("6cc5");var Nt=n("e11e"),Rt=n.n(Nt),xt=n("1134"),Mt=n.n(xt),At=n("bc3a"),Bt=n.n(At),Dt=n("b8ba"),It=Rt.a.icon({iconUrl:n("deae"),iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}),Ut=Rt.a.icon({iconUrl:n("3257"),iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}),Gt=Rt.a.icon({iconUrl:n("d6f2"),iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}),Pt=function(t){var e=1==t?"icon_bike":"icon_bike_outOfService";return Rt.a.icon({iconUrl:n("0591")("./".concat(e,".svg")),iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-20]})},Ft={props:{currentRoute:{type:Object}},data:function(){return{searchCity:null,myMap:null,myLayer:null,longitude:120.301697,latitude:22.610657,geojsonFeature:null,routeStart:null,routeEnd:null,startMarker:null,endMarker:null,showStations:!1,bikeStationList:[],bikeStationMarkers:[],stationAcceptableCities:["Taichung","Hsinchu","MiaoliCounty","NewTaipei","PingtungCounty","KinmenCounty","Taoyuan","Taipei","Kaohsiung","Tainan","Chiayi"]}},computed:{currentCity:function(){return O["a"].state.currentCity},userLocation:function(){return[this.latitude,this.longitude]}},watch:{currentRoute:function(){this.createPolyLine(),this.checkCityForYouBikeStation()}},methods:{initMap:function(){this.myMap=Rt.a.map("map").setView(this.userLocation,15),Rt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.myMap),Rt.a.marker(this.userLocation,{icon:It}).addTo(this.myMap).bindPopup("現在位置")},removeLayer:function(){this.myLayer&&(this.myMap.removeLayer(this.myLayer),this.myMap.removeLayer(this.startMarker),this.myMap.removeLayer(this.endMarker))},createPolyLine:function(){if(this.currentRoute){var t=new Mt.a.Wkt;this.geojsonFeature=t.read(this.currentRoute.Geometry).toJson(),this.removeLayer();var e={color:"#007f77",weight:8};this.myLayer=Rt.a.geoJSON(this.geojsonFeature,{style:e}).addTo(this.myMap),this.myMap.fitBounds(this.myLayer.getBounds()),this.routeStart=this.geojsonFeature.coordinates[0][0].reverse(),this.routeEnd=this.geojsonFeature.coordinates[0][this.geojsonFeature.coordinates[0].length-1].reverse(),this.setStartMarker(),this.setEndMarker()}},setStartMarker:function(){this.startMarker=new Rt.a.marker(this.routeStart,{icon:Ut}).addTo(this.myMap).bindPopup('<div class="card">\n            <div class="card-header">\n              <h6 class="card-title">'.concat(this.currentRoute.RouteName,'</h6>\n            </div>\n            <div class="card-body">\n              <p class="card-text mt-0">起點：').concat(this.currentRoute.RoadSectionStart,"</p>\n            </div>\n          </div>"))},setEndMarker:function(){this.endMarker=new Rt.a.marker(this.routeEnd,{icon:Gt}).addTo(this.myMap).bindPopup('<div class="card">\n            <div class="card-header">\n              <h6 class="card-title">'.concat(this.currentRoute.RouteName,'</h6>\n            </div>\n            <div class="card-body">\n              <p class="card-text mt-0">終點：').concat(this.currentRoute.RoadSectionEnd,"</p>\n            </div>\n          </div>"))},getUserLocation:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.longitude=e.coords.longitude,t.latitude=e.coords.latitude,t.myMap.setView(t.userLocation,13),Rt.a.marker(t.userLocation,{icon:It}).addTo(t.myMap).bindPopup("現在位置")}))},checkCityForYouBikeStation:function(){this.searchCity!=this.currentCity&&(this.searchCity=this.currentCity,this.bikeStationList=[],this.showStations=!1,this.clearStationMarkers(),-1!=this.stationAcceptableCities.indexOf(this.searchCity)&&this.getBikeStationData())},getBikeStationData:function(){var t=this;O["a"].commit("SET_LOADING",!0),Bt()({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Bike/Station/".concat(this.searchCity,"?%24format=JSON"),headers:Object(Dt["a"])()}).then((function(e){t.bikeStationList=e.data.map((function(t){return{uid:t.StationUID,name:t.StationName.Zh_tw,address:t.StationAddress.Zh_tw,position:[t.StationPosition.PositionLat,t.StationPosition.PositionLon],type:t.ServiceType}})),O["a"].commit("SET_LOADING",!1),t.getAvailableData()})).catch((function(t){console.log("err of station",t)}))},getAvailableData:function(){var t=this;O["a"].commit("SET_LOADING",!0),Bt()({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/".concat(this.searchCity,"?%24format=JSON"),headers:Object(Dt["a"])()}).then((function(e){e.data.forEach((function(e){t.bikeStationList.forEach((function(t){t.uid===e.StationUID&&(t.rentBikes=e.AvailableRentBikes,t.returnBikes=e.AvailableReturnBikes,t.status=e.ServiceStatus)}))})),O["a"].commit("SET_LOADING",!1)})).catch((function(t){console.log("err of available",t)}))},toggleStations:function(){var t=this;if(this.showStations=!this.showStations,O["a"].commit("SET_LOADING",!0),this.showStations){if(this.checkCityForYouBikeStation(),!this.bikeStationList.length)return this.showStations=!1,O["a"].commit("SET_LOADING",!1),void alert("抱歉，此縣市沒有提供 YouBike 服務！");setTimeout((function(){t.setStationMarkers(),O["a"].commit("SET_LOADING",!1)}),0)}else setTimeout((function(){t.clearStationMarkers(),O["a"].commit("SET_LOADING",!1)}),0)},setStationMarkers:function(){var t=this;this.bikeStationList.forEach((function(e){var n=Pt(e.status),r=Rt.a.marker(e.position,{icon:n}).addTo(t.myMap).bindPopup('<div class="card">\n              <div class="card-header">\n                <h6 class="card-title m-0">'.concat(e.name,'</h6>\n              </div>\n              <div class="card-body">\n                <small class="card-text">').concat(e.address,'</small>\n                <p class="card-text m-0">可租：').concat(e.rentBikes,'</p>\n                <p class="card-text m-0">可還：').concat(e.returnBikes,"</p>\n              </div>\n            </div>"));t.bikeStationMarkers.push(r)}))},clearStationMarkers:function(){var t=this;this.myMap.eachLayer((function(){t.bikeStationMarkers.forEach((function(e){return t.myMap.removeLayer(e)}))}))}},mounted:function(){this.getUserLocation(),this.initMap(),this.checkCityForYouBikeStation()}};n("d0ee");const zt=E()(Ft,[["render",Et]]);var Jt=zt,Ht={name:"Home",components:{TheList:St,TheSelect:et,TheMap:Jt},computed:{routeList:function(){return O["a"].getters["routeList"]},currentRoute:function(){return O["a"].state.currentRoute}}};const Yt=E()(Ht,[["render",U]]);var Kt=Yt,Vt=[{path:"/",name:"Home",component:Kt},{path:"/news",name:"News",component:function(){return n.e("News").then(n.bind(null,"a2f9"))}}],qt=Object(B["a"])({history:Object(B["b"])("/Taiwan-Bike/"),routes:Vt}),Wt=qt,Xt=n("7b17");Object(r["c"])(A).use(O["a"]).use(Wt).use(Xt["default"]).mount("#app")},5826:function(t,e,n){t.exports=n.p+"img/icon_bike_outOfService.0a405a7a.svg"},7759:function(t,e,n){},"7d72":function(t,e,n){},"82f4":function(t,e,n){},9524:function(t,e,n){},a18a:function(t,e,n){t.exports=n.p+"img/btn_bike_open.1325bffd.svg"},b14f:function(t,e,n){"use strict";n("7759")},b548:function(t,e,n){"use strict";n("5247")},b8ba:function(t,e,n){"use strict";var r=n("6c2d");function i(){var t="d6da811cd8f34850bb94d14c62750f3d",e="S71lrhT64eGz0yG31e7daCdUjzM",n=(new Date).toGMTString(),i=new r["a"]("SHA-1","TEXT");i.setHMACKey(e,"TEXT"),i.update("x-date: "+n);var o=i.getHMAC("B64"),a='hmac username="'+t+'", algorithm="hmac-sha1", headers="x-date", signature="'+o+'"';return{Authorization:a,"X-Date":n}}e["a"]=i},d0ee:function(t,e,n){"use strict";n("82f4")},d103:function(t,e,n){t.exports=n.p+"img/icon_bike.2083bcbd.svg"},d6f2:function(t,e,n){t.exports=n.p+"img/icon_route_end.57314948.svg"},deae:function(t,e,n){t.exports=n.p+"img/icon_myLocation.76943c95.svg"},f562:function(t,e,n){t.exports=n.p+"img/logo-s.91d1f8f4.svg"}});
//# sourceMappingURL=app.280fe3c9.js.map